{% extends 'productos/base.html' %}
{% load static %}

{% block title %}Ticket de Venta #{{ venta.id }} - Sistema POS{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/ticket.css' %}">
{% endblock %}

{% block content %}
<div class="ticket-container">
    
    <!-- HEADER DEL TICKET -->
    <div class="ticket-header">
        <h1 class="ticket-titulo"> SISTEMA PDV</h1>
        <p class="ticket-subtitulo">Tienda Wicho</p>
        <p class="ticket-rfc">RFC: XXX-XXXXXX-XXX</p>
    </div>
    
    <!-- INFORMACIÓN DE LA VENTA -->
    <div class="ticket-info">
        <div class="ticket-info-row">
            <span class="ticket-info-label">Ticket:</span>
            <span>#{{ venta.id }}</span>
        </div>
        <div class="ticket-info-row">
            <span class="ticket-info-label">Fecha:</span>
            <span>{{ venta.fecha|date:"d/m/Y H:i" }}</span>
        </div>
        <div class="ticket-info-row">
            <span class="ticket-info-label">Estado:</span>
            <span class="ticket-estado estado-{{ venta.estado }}">
                {{ venta.get_estado_display }}
            </span>
        </div>
    </div>
    
    <!-- SEPARADOR -->
    <div class="ticket-separador"></div>
    
    <!-- PRODUCTOS -->
    <div class="ticket-productos">
        <table class="ticket-table">
            <thead>
                <tr>
                    <th>Producto</th>
                    <th>Cant</th>
                    <th>Precio</th>
                    <th>Subtotal</th>
                </tr>
            </thead>
            <tbody>
                {% for detalle in venta.detalleventa_set.all %}
                <tr>
                    <td>{{ detalle.producto.nombre|truncatewords:3 }}</td>
                    <td>{{ detalle.cantidad }}</td>
                    <td>${{ detalle.precio_unitario }}</td>
                    <td>${{ detalle.subtotal }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <!-- SEPARADOR -->
    <div class="ticket-separador"></div>
    
    <!-- TOTAL -->
    <div class="ticket-total">
        <div class="ticket-total-row">
            <span>TOTAL:</span>
            <span class="ticket-total-monto">${{ venta.total }}</span>
        </div>
    </div>
    
    <!-- FOOTER -->
    <div class="ticket-footer">
        <p>¡Gracias por su compra!</p>
        <p>Conserve su ticket</p>
        <p>www.sistemapos.com</p>
    </div>
    
    <!-- BOTONES DE ACCIÓN -->
    <div class="ticket-acciones no-print">
        <button onclick="window.print()" class="btn-imprimir">
             Imprimir
        </button>
        <button onclick="window.history.back()" class="btn-volver">
             Volver
        </button>
    </div>
    
</div>
{% endblock %}